import PIL
import os
from barcode import Code128
from barcode.writer import ImageWriter
import tkinter
from tkinter import filedialog
from reportlab.lib.units import mm
from reportlab.pdfgen import canvas
from reportlab.lib.pagesizes import landscape
##from reportlab.lib.pagesizes import Size


def criar_codigo():
    arquivo_selecionado = filedialog.askopenfilename()
    print(arquivo_selecionado)
    pdf_path = os.path.splitext(arquivo_selecionado)[0] + '.pdf'
    pdf = canvas.Canvas(pdf_path)
    with open(arquivo_selecionado, 'r') as arquivo:
        for codigo in arquivo:
            print(codigo[:-1])
            codigo_barra = Code128(codigo, writer=ImageWriter())
            nome_arquivo = codigo[:-1]
            codigo_barra.save(nome_arquivo, options={'width': 300, 'height': 200})
        arquivo.close()
    pdf.save()



window = tkinter.Tk()
window.title("Gerador de codigo")
window.config(padx=80, pady=80, background='#d3d3d3')
label_button = tkinter.Label(text="Faça upload do arquivo txt para a impressão de etiquetas", font=500, background="#fff")
label_button.pack()

upload_button = tkinter.Button(window, text="Upload", command=criar_codigo, background='#fff', borderwidth=2)
upload_button.pack()

window.mainloop()

